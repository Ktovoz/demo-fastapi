# 前端文档

<!--
文档管理规范:
- 内容：包含前端技术栈和具体实现细节
- 目的：详细记录前端开发所使用的技术、框架及具体实现方式
请AI在编辑此文档时遵守上述规范
-->

> ⚠️ **重要提示**：本项目采用前后端分离架构开发模式
> - 🚀 **后端API正在开发中**：目前后端API接口尚未完全开发完成
> - 🎨 **前端可独立开发**：前端开发时可使用Mock数据或假数据进行功能开发
> - 🔗 **后续联调**：等待后端API开发完成后，前后端进行接口联调和集成测试
> - 📝 **文档参考**：可参考 `doc/API文档.md` 了解API接口设计规范

## 开发阶段说明

### 当前开发阶段
- **第一阶段**：前端UI界面和基础功能开发（使用Mock数据）
- **第二阶段**：后端API接口开发和测试
- **第三阶段**：前后端接口联调和系统集成
- **第四阶段**：功能测试和部署上线

### Mock数据开发指南
- 使用 `mock/api` 目录下的假数据进行开发
- 遵循API文档中定义的接口规范
- 保持数据结构的一致性，便于后续联调
- 使用前端日志系统记录开发过程

### 前后端协作流程
1. 前端根据设计文档和API规范进行界面开发
2. 后端按照API文档实现接口功能
3. 前后端定期沟通，确认接口规范和数据格式
4. 后端接口完成后进行联调测试
5. 解决联调中发现的问题，完善系统功能

## 技术栈

### 核心框架
- **Vue 3.3.11** - 渐进式JavaScript框架，支持组合式API
- **Vite 5.0.8** - 新一代前端构建工具，提供快速的开发服务器和构建工具

### UI组件库
- **Ant Design Vue 4.0.8** - 企业级UI设计语言，提供丰富的组件
- **@ant-design/icons-vue 7.0.1** - Ant Design图标库

### 状态管理
- **Pinia 2.1.7** - Vue的官方状态管理库，替代Vuex

### 路由管理
- **Vue Router 4.2.5** - Vue.js官方路由管理器

### 网络请求
- **Axios 1.6.2** - HTTP请求库，支持请求拦截和响应处理

### 日志系统
- **loglevel 1.8.1** - 轻量级日志库
- **loglevel-plugin-prefix** - 日志前缀插件

### 开发工具
- **ESLint** - 代码质量检查工具
- **Prettier** - 代码格式化工具

## 项目结构

```
frontend/
├── public/                     # 静态资源
│   ├── index.html             # HTML模板
│   └── favicon.ico            # 网站图标
├── src/                       # 源代码
│   ├── api/                   # API接口封装
│   │   ├── auth.js            # 认证相关API
│   │   ├── user.js            # 用户管理API
│   │   ├── role.js            # 角色管理API
│   │   ├── dashboard.js       # 仪表板API
│   │   └── index.js           # API配置和拦截器
│   ├── components/            # 公共组件
│   │   ├── common/            # 通用组件
│   │   │   ├── Loading.vue    # 加载组件
│   │   │   ├── Pagination.vue # 分页组件
│   │   │   └── SearchForm.vue # 搜索表单组件
│   │   └── layout/            # 布局组件
│   │       ├── Header.vue     # 头部导航
│   │       ├── Sidebar.vue    # 侧边栏
│   │       └── Footer.vue     # 底部
│   ├── views/                 # 页面视图
│   │   ├── auth/              # 认证页面
│   │   │   ├── Login.vue      # 登录页面
│   │   │   ├── Register.vue   # 注册页面
│   │   │   └── ForgotPassword.vue # 忘记密码
│   │   ├── dashboard/         # 仪表板
│   │   │   └── Index.vue      # 仪表板首页
│   │   ├── users/             # 用户管理
│   │   │   ├── UserList.vue   # 用户列表
│   │   │   ├── UserDetail.vue # 用户详情
│   │   │   └── UserEdit.vue   # 用户编辑
│   │   ├── roles/             # 角色管理
│   │   │   ├── RoleList.vue   # 角色列表
│   │   │   └── RoleEdit.vue   # 角色编辑
│   │   ├── system/            # 系统管理
│   │   │   ├── Logs.vue       # 操作日志
│   │   │   └── Settings.vue   # 系统设置
│   │   └── profile/           # 个人中心
│   │       └── Profile.vue    # 个人资料
│   ├── router/                # 路由配置
│   │   └── index.js           # 路由定义和守卫
│   ├── store/                 # 状态管理
│   │   ├── auth.js            # 认证状态管理
│   │   ├── user.js            # 用户状态管理
│   │   ├── system.js          # 系统状态管理
│   │   └── index.js           # Store入口
│   ├── utils/                 # 工具函数
│   │   ├── logger.js          # 日志工具
│   │   ├── request.js         # 请求封装
│   │   ├── constants.js       # 常量定义
│   │   ├── auth.js            # 认证工具
│   │   └── validators.js      # 表单验证器
│   ├── styles/                # 样式文件
│   │   ├── main.css           # 主样式
│   │   ├── variables.css      # CSS变量
│   │   └── antd-overrides.css # Ant Design样式覆盖
│   ├── App.vue                # 根组件
│   └── main.js                # 应用入口
├── tests/                     # 测试文件
├── .eslintrc.js               # ESLint配置
├── .prettierrc                # Prettier配置
├── vite.config.js             # Vite配置
└── package.json               # 依赖配置
```

## 页面设计

### 认证相关页面

#### 1. 登录页面 (Login.vue)
**设计思路**：
- 简洁的居中卡片式布局
- 包含用户名/密码输入框
- 支持记住登录状态功能
- 提供注册和忘记密码入口
- 集成表单验证和错误提示
- 支持加载状态显示

#### 2. 注册页面 (Register.vue)
**设计思路**：
- 与登录页面保持一致的设计风格
- 包含用户名、邮箱、密码、确认密码字段
- 实时验证用户名和邮箱唯一性
- 密码强度提示
- 服务条款和隐私政策确认
- 注册成功后自动跳转

#### 3. 忘记密码页面 (ForgotPassword.vue)
**设计思路**：
- 邮箱验证找回密码
- 发送验证码功能
- 验证码倒计时显示
- 新密码设置界面
- 安全提示和密码规则说明

### 主框架布局

#### 1. 主布局组件 (MainLayout.vue)
**设计思路**：
- 经典的后台管理布局结构
- 顶部导航栏：Logo、面包屑、用户信息、通知
- 左侧菜单栏：可折叠的多级菜单
- 主内容区域：动态加载页面内容
- 响应式设计，支持移动端适配
- 主题切换功能

#### 2. 顶部导航 (Header.vue)
**设计思路**：
- 左侧：Logo和应用名称
- 中间：面包屑导航
- 右侧：搜索框、通知中心、用户头像、下拉菜单
- 支持全屏切换
- 实时通知提醒

#### 3. 侧边栏 (Sidebar.vue)
**设计思路**：
- 多级菜单支持
- 图标和文字结合
- 当前页面高亮显示
- 菜单权限控制
- 收起/展开动画效果
- 收藏常用功能

### 核心功能页面

#### 1. 仪表板页面 (Dashboard.vue)
**设计思路**：
- 数据可视化展示
- 关键指标卡片
- 图表统计：用户增长、系统负载等
- 快捷操作入口
- 最近活动记录
- 系统公告显示

#### 2. 用户管理页面
**用户列表页面 (UserList.vue)**：
- 搜索和筛选功能
- 表格展示用户信息
- 分页和排序
- 批量操作支持
- 快速启用/禁用
- 导入导出功能

**用户详情页面 (UserDetail.vue)**：
- 用户基本信息展示
- 角色权限显示
- 登录历史记录
- 操作日志查看
- 相关操作按钮

**用户编辑页面 (UserEdit.vue)**：
- 表单编辑用户信息
- 角色分配选择
- 密码重置功能
- 头像上传
- 表单验证和保存

#### 3. 角色管理页面
**角色列表页面 (RoleList.vue)**：
- 角色列表展示
- 权限概览显示
- 角色状态管理
- 快速编辑功能
- 权限分配入口

**角色编辑页面 (RoleEdit.vue)**：
- 角色基本信息编辑
- 权限树形选择
- 权限说明提示
- 用户关联显示
- 权限变更记录

#### 4. 系统监控页面
**系统日志页面 (Logs.vue)**：
- 日志分类筛选
- 时间范围选择
- 关键词搜索
- 日志级别过滤
- 日志详情查看
- 日志导出功能

**系统设置页面 (Settings.vue)**：
- 系统参数配置
- 邮件服务设置
- 安全策略配置
- 备份恢复设置
- 系统信息显示

#### 5. 个人中心页面 (Profile.vue)
**设计思路**：
- 个人信息编辑
- 头像上传
- 密码修改
- 登录记录查看
- 个人偏好设置
- 安全设置

### 错误页面

#### 1. 404页面 (NotFound.vue)
**设计思路**：
- 友好的错误提示
- 返回首页按钮
- 搜索建议
- 相关链接推荐

#### 2. 403页面 (Forbidden.vue)
**设计思路**：
- 权限不足提示
- 联系管理员信息
- 返回上一页
- 申请权限入口

## 组件设计

### 通用组件

#### 1. 表格组件 (Table.vue)
**设计思路**：
- 支持自定义列配置
- 内置分页功能
- 排序和筛选支持
- 批量操作选择
- 加载状态显示
- 空数据提示

#### 2. 搜索表单组件 (SearchForm.vue)
**设计思路**：
- 动态表单项生成
- 支持多种输入类型
- 条件重置功能
- 高级搜索展开/收起
- 搜索条件保存

#### 3. 分页组件 (Pagination.vue)
**设计思路**：
- 完整的分页功能
- 页面大小选择
- 总数显示
- 快速跳转
- 简洁模式支持

#### 4. 加载组件 (Loading.vue)
**设计思路**：
- 多种加载动画
- 全屏和局部加载
- 加载文字自定义
- 遮罩层透明度控制

#### 5. 确认对话框组件 (ConfirmDialog.vue)
**设计思路**：
- 统一的确认对话框样式
- 支持自定义内容
- 异步操作支持
- 防重复点击

### 业务组件

#### 1. 用户头像组件 (UserAvatar.vue)
**设计思路**：
- 默认头像显示
- 在线状态指示
- 尺寸自定义
- 点击预览大图

#### 2. 角色标签组件 (RoleTag.vue)
**设计思路**：
- 不同角色颜色区分
- 角色说明提示
- 支持删除操作
- 批量显示优化

#### 3. 权限树组件 (PermissionTree.vue)
**设计思路**：
- 树形结构展示
- 复选框选择
- 权限说明提示
- 搜索定位功能

#### 4. 状态标签组件 (StatusTag.vue)
**设计思路**：
- 启用/禁用状态
- 不同状态颜色
- 状态切换功能
- 权限控制

### 布局组件

#### 1. 页面容器组件 (PageContainer.vue)
**设计思路**：
- 统一的页面容器样式
- 面包屑导航集成
- 页面操作按钮区域
- 页面标题和描述

#### 2. 卡片容器组件 (CardContainer.vue)
**设计思路**：
- 统一的卡片样式
- 标题和操作区域
- 折叠展开功能
- 响应式布局

## 状态管理设计

### 认证状态管理 (auth.js)
**设计思路**：
- 用户登录状态管理
- Token存储和刷新
- 用户信息和权限缓存
- 登录状态持久化
- 权限检查方法

### 用户状态管理 (user.js)
**设计思路**：
- 用户列表数据管理
- 用户详情缓存
- 搜索条件状态
- 分页信息管理
- 批量选择状态

### 系统状态管理 (system.js)
**设计思路**：
- 系统配置信息
- 主题和语言设置
- 菜单展开状态
- 通知消息管理
- 全局加载状态

## 路由设计

### 路由结构
**设计思路**：
- 嵌套路由结构
- 懒加载页面组件
- 路由元信息配置
- 权限验证集成
- 面包屑自动生成

### 路由守卫
**设计思路**：
- 登录状态检查
- 权限验证
- 页面访问统计
- 路由切换动画
- 错误页面处理

## API接口设计

### 接口封装
**设计思路**：
- 统一的请求拦截器
- 响应数据格式化
- 错误处理统一化
- 请求重试机制
- 取消请求支持

### 接口模块
**设计思路**：
- 按功能模块划分
- 统一的调用方式
- 参数和响应类型定义
- 接口文档同步
- Mock数据支持

## 日志系统设计

### 日志级别
**设计思路**：
- DEBUG：调试信息
- INFO：一般信息
- WARN：警告信息
- ERROR：错误信息
- 自定义级别支持

### 日志功能
**设计思路**：
- 多种日志记录方式
- 性能监控日志
- 用户操作日志
- API请求日志
- 日志本地存储

## 开发规范

### 组件开发规范
- 组件职责单一化
- Props和Events明确定义
- 组件复用性设计
- 文档注释完整

### 代码风格规范
- 使用Composition API
- 统一的命名规范
- 合理的代码组织
- 类型安全优先

### 性能优化规范
- 组件懒加载
- 路由懒加载
- 图片资源优化
- 缓存策略设计

## 开发进度（2025-10-04）
- 完成基础布局组件（Header、Sidebar、Footer、PageContainer、CardContainer）骨架
- 新增仪表盘、用户、角色、系统、个人中心、认证及错误页面的基础视图
- 初始化 API 封装与 Pinia 仓库骨架，等待后端联调
- 实现登录页流程：接入 Pinia 鉴权、表单校验、登录后重定向及会话持久化
