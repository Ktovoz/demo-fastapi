# 需求文档

## 1. 概述

本文档旨在明确前后端接口需求，确保前端页面功能的完整实现。通过对前端页面的分析，我们识别出所有需要的后端接口，并与现有API文档进行对比，以确定需要开发或完善的接口。

## 2. 前端页面接口需求分析

### 2.1 仪表盘页面 (Dashboard)

仪表盘页面需要以下接口支持：

1. **获取仪表盘核心数据**
   - 接口: GET /dashboard/metrics
   - 用途: 获取摘要卡片、流量图表、系统健康状态和最近活动等核心数据
   - 状态: 已实现

2. **获取仪表盘概览数据**
   - 接口: GET /dashboard/overview
   - 用途: 备用概览接口，用于渐进式加载
   - 状态: 已实现

### 2.2 用户管理页面

用户管理页面包含用户列表、用户详情、创建用户、编辑用户等功能，需要以下接口：

1. **获取用户列表**
   - 接口: GET /users
   - 用途: 分页查询用户列表，支持关键词搜索、状态筛选、角色筛选等
   - 状态: 已实现

2. **获取用户详情**
   - 接口: GET /users/{id}
   - 用途: 获取单个用户的详细信息
   - 状态: 已实现

3. **创建用户**
   - 接口: POST /users
   - 用途: 创建新用户
   - 状态: 已实现

4. **更新用户信息**
   - 接口: PUT /users/{id}
   - 用途: 更新用户基础信息及权限
   - 状态: 已实现

5. **切换用户状态**
   - 接口: PATCH /users/{id}/status
   - 用途: 启用/禁用用户
   - 状态: 已实现

6. **删除用户**
   - 接口: DELETE /users/{id}
   - 用途: 删除单个用户
   - 状态: 已实现

7. **批量删除用户**
   - 接口: POST /users/bulk-delete
   - 用途: 批量删除用户
   - 状态: 已实现

### 2.3 角色管理页面

角色管理页面包含角色列表、角色详情、编辑角色等功能，需要以下接口：

1. **获取角色列表**
   - 接口: GET /roles
   - 用途: 获取所有角色列表
   - 状态: 已实现

2. **获取角色详情**
   - 接口: GET /roles/{id}
   - 用途: 获取单个角色的详细信息
   - 状态: 已实现

3. **更新角色信息**
   - 接口: PUT /roles/{id}
   - 用途: 更新角色名称、描述、权限与状态
   - 状态: 已实现

### 2.4 系统日志页面

系统日志页面需要以下接口支持：

1. **获取系统日志**
   - 接口: GET /system/logs
   - 用途: 分页查询系统日志，支持关键词搜索、级别筛选等
   - 状态: 已实现

2. **获取日志概览数据**
   - 接口: GET /system/logs/summary
   - 用途: 获取日志级别分布、最近日志、模块热点等概览数据
   - 状态: 已实现

### 2.5 系统设置页面

系统设置页面需要以下接口支持：

1. **获取系统设置**
   - 接口: GET /system/settings
   - 用途: 读取系统配置信息
   - 状态: 已实现

2. **更新系统设置**
   - 接口: PUT /system/settings
   - 用途: 更新系统配置信息
   - 状态: 已实现

### 2.6 后台运营管理页面

后台运营管理页面需要以下接口支持：

1. **获取运营总览数据**
   - 接口: GET /admin/overview
   - 用途: 获取运营总览数据，包括卡片、趋势、服务状态等
   - 状态: 已实现

2. **获取告警列表**
   - 接口: GET /admin/alerts
   - 用途: 获取系统告警列表
   - 状态: 已实现

3. **确认告警**
   - 接口: POST /admin/alerts/{alert_id}/acknowledge
   - 用途: 确认处理告警
   - 状态: 已实现

4. **获取任务列表**
   - 接口: GET /admin/tasks
   - 用途: 获取后台任务列表，支持分页和筛选
   - 状态: 已实现

5. **创建任务**
   - 接口: POST /admin/tasks
   - 用途: 创建新的后台任务
   - 状态: 已实现

6. **更新任务**
   - 接口: PATCH /admin/tasks/{task_id}
   - 用途: 更新任务状态或其他信息
   - 状态: 已实现

7. **获取审计时间线**
   - 接口: GET /admin/audit-timeline
   - 用途: 获取系统操作审计时间线
   - 状态: 已实现

### 2.7 认证相关页面

认证相关页面（登录、注册、找回密码）需要以下接口支持：

1. **用户登录**
   - 接口: POST /auth/login-json
   - 用途: 邮箱+密码登录，返回访问令牌及用户信息
   - 状态: 已实现

2. **用户注册**
   - 接口: POST /auth/register
   - 用途: 创建新账号
   - 状态: 已实现

3. **找回密码**
   - 接口: POST /auth/forgot-password
   - 用途: 发送密码重置邮件
   - 状态: 已实现

## 3. 缺失接口识别

经过对比分析前端页面需求和现有API文档及后端实现，所有需要的接口均已实现。没有发现缺失的接口。

## 4. 需求优先级

所有接口需求均已满足，无需进一步开发。

## 5. 后续建议

1. 建议进行全面的接口测试，确保所有接口都能正常工作并返回符合要求的数据格式
2. 建议增加接口监控和日志记录，便于及时发现和解决问题
3. 建议定期审查接口性能，确保系统在高负载情况下的稳定性